<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>NihongoPro - Learn Japanese</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#135bec",
                        "primary-dark": "#0e45b5",
                        "primary-light": "#818cf8",
                        "secondary": "#fbbf24",
                        "accent": "#f43f5e",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1e293b",
                        "card-light": "#ffffff",
                        "card-dark": "#1b2433",
                        "text-main": "#0d121b",
                        "text-secondary": "#4c669a",
                        "grade-again": "#ef4444",
                        "grade-hard": "#f59e0b",
                        "grade-good": "#135bec",
                        "grade-easy": "#10b981",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                        "japanese": ["Noto Sans JP", "sans-serif"],
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px"},
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(19, 91, 236, 0.3)',
                    }
                },
            },
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800&family=Noto+Sans:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <!-- React & Router -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .material-symbols-outlined.filled, .icon-filled { font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .icon-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        body { min-height: 100dvh; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
        .pt-safe-top { padding-top: env(safe-area-inset-top, 0px); }
        ruby { display: inline-flex; flex-direction: column-reverse; align-items: center; vertical-align: bottom; line-height: 1; }
        rt { display: block; font-size: 0.6em; line-height: 1; margin-bottom: 2px; color: #6b7280; }
        .dark rt { color: #9ca3af; }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white antialiased transition-colors duration-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

        // --- Helper Components ---

        const BottomNav = () => {
            const navigate = useNavigate();
            const location = useLocation();

            const isActive = (path) => location.pathname === path;
            const getIconClass = (path) => isActive(path) ? "material-symbols-outlined text-[26px] filled" : "material-symbols-outlined text-[26px]";
            const getTextClass = (path) => isActive(path) ? "text-[10px] font-bold text-primary" : "text-[10px] font-medium text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300";
            const getColorClass = (path) => isActive(path) ? "text-primary" : "text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300";

            return (
                <div className="fixed bottom-0 left-0 right-0 z-50 bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 pb-safe shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                    <div className="flex justify-around items-center h-16 max-w-md mx-auto px-2">
                        <Link to="/dashboard" className={`flex flex-col items-center justify-center w-full h-full gap-1 group ${getColorClass('/dashboard')}`}>
                            <span className={getIconClass('/dashboard')}>home</span>
                            <span className={getTextClass('/dashboard')}>Home</span>
                        </Link>
                        <Link to="/map" className={`flex flex-col items-center justify-center w-full h-full gap-1 group ${getColorClass('/map')}`}>
                            <span className={getIconClass('/map')}>explore</span>
                            <span className={getTextClass('/map')}>Map</span>
                        </Link>
                         <Link to="/leaderboard" className={`flex flex-col items-center justify-center w-full h-full gap-1 group ${getColorClass('/leaderboard')}`}>
                            <span className={getIconClass('/leaderboard')}>bar_chart</span>
                            <span className={getTextClass('/leaderboard')}>Stats</span>
                        </Link>
                        <Link to="/profile" className={`flex flex-col items-center justify-center w-full h-full gap-1 group ${getColorClass('/profile')}`}>
                            <span className={getIconClass('/profile')}>person</span>
                            <span className={getTextClass('/profile')}>Profile</span>
                        </Link>
                    </div>
                </div>
            );
        };

        const BackHeader = ({ title }) => {
            const navigate = useNavigate();
            return (
                <header className="sticky top-0 z-40 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 transition-colors duration-300">
                    <div className="flex items-center justify-between p-4 pb-2">
                        <button onClick={() => navigate(-1)} className="flex size-10 items-center justify-center rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                            <span className="material-symbols-outlined text-slate-900 dark:text-white">arrow_back</span>
                        </button>
                        <h2 className="text-lg font-bold leading-tight tracking-tight flex-1 text-center">{title}</h2>
                        <div className="w-10"></div> {/* Spacer */}
                    </div>
                </header>
            );
        };


        // --- Screen Components ---

        const WelcomeScreen = () => {
            const navigate = useNavigate();
            return (
                <div className="relative flex h-full min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-x-hidden font-display transition-colors duration-300">
                    <div className="relative w-full h-[45vh] min-h-[420px] shrink-0">
                        <div className="absolute inset-0 bg-cover bg-center" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCsBUQ8NI2rBviCSsKXFO0Cpb0xqtMEqGYC29xY5pvXUYAl9Rnm5alTm0zll0e2qqQi7I5nCY2FrgYSTaf_SP1yaRTqU9U2_QKotz2rLd90LBtmqGvOSK5dGhgC9dZBZSrdE1ymejWo4FgsOlBZsZ3Y16zdDMVBuix2dODZxoWDovuORosv8h2JGBEmMOtr8T7dl7sNBkKGfPMR8ivbY64VE5GvD0Fxv_q1lZv_9XUwGxfPjtT76AWes9EPeNqCvk0Yiyzlx__AmN8")'}}></div>
                        <div className="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-background-light dark:to-background-dark"></div>
                        <div className="absolute top-0 left-0 right-0 p-6 pt-12 flex justify-center items-center">
                            <div className="flex items-center gap-2 bg-white/20 dark:bg-black/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/10 shadow-lg">
                                <span className="material-symbols-outlined text-white text-2xl">translate</span>
                                <p className="text-white tracking-wide text-lg font-bold leading-tight">NihongoPro</p>
                            </div>
                        </div>
                    </div>
                    <div className="flex-1 flex flex-col -mt-12 z-10 px-5 pb-8">
                        <div className="text-center mb-6">
                            <h1 className="text-[#0d121b] dark:text-white tracking-tight text-[32px] font-bold leading-tight pb-2 drop-shadow-sm">Master Japanese Today</h1>
                            <p className="text-[#4c669a] dark:text-gray-400 text-base font-normal leading-relaxed px-4">
                                Join millions of learners on their journey to fluency with AI-powered lessons.
                            </p>
                        </div>
                         {/* Carousel Placeholder - Visual Only */}
                        <div className="w-full mb-6">
                            <div className="flex overflow-x-auto no-scrollbar snap-x snap-mandatory gap-4 px-2 pb-4">
                                <div className="snap-center shrink-0 w-[85%] max-w-[300px] flex flex-col gap-3 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div className="w-full aspect-[4/3] bg-primary/10 rounded-xl flex items-center justify-center relative overflow-hidden group">
                                        <div className="absolute inset-0 bg-cover bg-center opacity-80" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAh7N1oQZqK5bg82R01aMVH623YmJzmHaIvcuhrHSTA6hlNSpqVZR6QdtZBYUyxsKXrhIfxNeyv59LdLmuaQDhcp5cWnjbF3PCgtqCVx7aJf-XIKBBb-13JfaBdtjytMS_YrQKXyvUsF-dtXM0rRNEUeM8WwYhalDntQq44tg8p1eKaL-88rjGqfpwE59dPApu5gWO4aimAnXQbFPutfFUvaOerVV-V4bOjWVZNvZCw1x9WPd5ZWcjMfx8kuW3gx5RsCEochxiOWOs")'}}></div>
                                        <span className="material-symbols-outlined text-white text-5xl drop-shadow-md relative z-10">school</span>
                                    </div>
                                    <div>
                                        <p className="text-[#0d121b] dark:text-white text-lg font-semibold leading-tight mb-1">Learn 2,000+ Kanji</p>
                                        <p className="text-[#4c669a] dark:text-gray-400 text-sm font-normal leading-normal">Master essential characters.</p>
                                    </div>
                                </div>
                                <div className="snap-center shrink-0 w-[85%] max-w-[300px] flex flex-col gap-3 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div className="w-full aspect-[4/3] bg-purple-500/10 rounded-xl flex items-center justify-center relative overflow-hidden group">
                                         <div className="absolute inset-0 bg-cover bg-center opacity-80" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuA_X-4WZbOKX3Zfb6mgRoHb7QLN-Za02yTa8T16AIqSwDaj3prvLI1jp7s9_8bTYehCMhIvcM3qmf3PYKlHicODRYb0hy20RPwaO1qZdMQjklpigzNt_aT3adeMPmvtoOr4kIwz1xiL7zPI7Mx-KBs2MGTIoQm-yzhGdNoFd0ZzrODD0iqPVjJqX6yB5edCQfv4bq-6-BUg6_POIrE2qJRVpYjoSrTWe_5eRICdz20T1HyFFv0hB4YhnR0NQPw4PesogVVjRDDA1rE")'}}></div>
                                        <span className="material-symbols-outlined text-white text-5xl drop-shadow-md relative z-10">mic</span>
                                    </div>
                                    <div>
                                        <p className="text-[#0d121b] dark:text-white text-lg font-semibold leading-tight mb-1">Perfect Pronunciation</p>
                                        <p className="text-[#4c669a] dark:text-gray-400 text-sm font-normal leading-normal">AI-powered speech recognition.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="flex w-full flex-row items-center justify-center gap-2 mb-8">
                            <div className="h-2 w-6 rounded-full bg-primary transition-all duration-300"></div>
                            <div className="h-2 w-2 rounded-full bg-[#cfd7e7] dark:bg-gray-700"></div>
                        </div>
                        <div className="flex flex-col gap-3 w-full max-w-sm mx-auto mt-auto">
                            <button onClick={() => navigate('/login')} className="flex items-center justify-center w-full bg-primary hover:bg-blue-700 text-white font-bold text-base py-4 px-6 rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-[0.98]">
                                Get Started
                            </button>
                            <button onClick={() => navigate('/login')} className="flex items-center justify-center w-full bg-transparent border-2 border-primary/20 dark:border-white/10 text-primary dark:text-white font-semibold text-base py-4 px-6 rounded-xl hover:bg-primary/5 dark:hover:bg-white/5 transition-all active:scale-[0.98]">
                                I already have an account
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const LoginScreen = () => {
            const navigate = useNavigate();
            return (
                <div className="bg-background-light dark:bg-background-dark min-h-screen flex items-center justify-center font-display text-text-main dark:text-white">
                    <div className="relative flex w-full max-w-md flex-col bg-surface-light dark:bg-surface-dark shadow-xl overflow-hidden min-h-screen sm:min-h-0 sm:rounded-xl sm:h-auto sm:my-8 border-x border-b border-transparent dark:border-border-dark">
                        <div className="relative w-full h-[220px] shrink-0">
                            <div className="absolute inset-0 bg-cover bg-center" style={{backgroundImage: 'linear-gradient(0deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 60%), url("https://lh3.googleusercontent.com/aida-public/AB6AXuAOyC9UQgHw5ZqtmUKh1jJyyleSihof0K5g7rJ7FxKANfs7_B008DmQImuwAWO0EU4AW3FXoJ_bx-SS1162iBSkRjJQAA58euyRq-MWrLXTy2HzTAhVAgQo9pd_9nMLE3wUTm_ler-8kxSQg-MbtmcCpDFU3cyOZU62CL6z2SKO7rJaYpFQddal1BDBm4ZAtYrko9rBaTsudLPL1kzyJEZz30zYVMhmwdbHUOFnrLgHRcWwucmF0e-oWA1e_T4EIz_L-mD10wyXf0g")'}}></div>
                            <div className="absolute inset-0 flex flex-col justify-end p-6 z-10">
                                <h1 className="text-white tracking-tight text-3xl font-bold leading-tight drop-shadow-sm">Master Japanese today</h1>
                            </div>
                        </div>
                        <div className="flex border-b border-border-light dark:border-border-dark px-6 pt-4">
                            <div className="flex flex-col items-center justify-center border-b-[3px] border-primary text-text-main dark:text-white pb-3 flex-1 cursor-pointer">
                                <p className="text-sm font-bold leading-normal tracking-wide">Log In</p>
                            </div>
                            <div className="flex flex-col items-center justify-center border-b-[3px] border-transparent text-text-secondary dark:text-gray-400 pb-3 flex-1 cursor-pointer">
                                <p className="text-sm font-bold leading-normal tracking-wide">Sign Up</p>
                            </div>
                        </div>
                        <div className="flex flex-col p-6 gap-5">
                            <div className="pb-1">
                                <h2 className="text-text-main dark:text-white text-xl font-bold">Welcome back!</h2>
                            </div>
                            <div className="flex flex-col gap-2">
                                <label className="text-text-main dark:text-gray-200 text-sm font-semibold leading-normal">Email</label>
                                <input className="form-input flex w-full resize-none rounded-lg text-text-main dark:text-white bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark focus:border-primary focus:ring-1 focus:ring-primary h-12 px-4 text-base" placeholder="name@example.com" type="email"/>
                            </div>
                            <div className="flex flex-col gap-2">
                                <label className="text-text-main dark:text-gray-200 text-sm font-semibold leading-normal">Password</label>
                                <input className="form-input flex w-full resize-none rounded-lg text-text-main dark:text-white bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark focus:border-primary focus:ring-1 focus:ring-primary h-12 px-4 text-base" placeholder="Enter your password" type="password"/>
                            </div>
                            <button onClick={() => navigate('/dashboard')} className="w-full bg-primary hover:bg-blue-700 text-white font-bold h-12 rounded-lg shadow-sm hover:shadow-md transition-all active:scale-[0.98] mt-2 flex items-center justify-center gap-2">
                                <span>Log In</span>
                                <span className="material-symbols-outlined" style={{fontSize: '18px'}}>arrow_forward</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const DashboardScreen = () => {
            const navigate = useNavigate();
            return (
                <div className="relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark pb-24 overflow-x-hidden shadow-2xl">
                     <div className="sticky top-0 z-50 flex items-center bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md p-4 justify-between transition-colors">
                        <div className="flex items-center gap-3">
                            <div className="bg-center bg-no-repeat bg-cover rounded-full size-10 shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer" onClick={() => navigate('/profile')} style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCwHUB1bEOuO2wzs9u2f_SIwtkABtflt6A984BwBLFzFcddRY8ijD9OwLgWRJtuQd-h5roWnf3mXH-VyLwHo80M9OHVw0zv5lYjHyOB76ehQg-2Ww7Z4MK09Hj8mGEqrIxEbw9ws6ydqK5wWA4i-PRiQCnCZEOwA8e67P3m9T4yFbd3htskYvnZHGPTnkiPClEOXn1bJ39f93nByLSSX43ZzZRl7pBZWNOwIbPKyzZ5xuGVgqBOPUJ6FSs6BCmrXU9rF6Rs2cqHVqM")'}}></div>
                        </div>
                        <h2 className="text-[#0d121b] dark:text-white text-lg font-bold">Dashboard</h2>
                        <button className="flex items-center justify-center rounded-full size-10 bg-white dark:bg-gray-800 shadow-sm border border-gray-100 dark:border-gray-700 text-[#0d121b] dark:text-white">
                            <span className="material-symbols-outlined text-[24px]">notifications</span>
                        </button>
                    </div>

                    <div className="px-4 pt-2 pb-4">
                        <h2 className="text-[#0d121b] dark:text-white text-[28px] font-bold leading-tight tracking-tight">
                            こんにちは, <br/><span className="text-primary">Alex-san!</span>
                        </h2>
                    </div>

                    <div className="flex gap-3 px-4 mb-6">
                        <div className="flex flex-1 flex-col gap-1 rounded-2xl bg-white dark:bg-surface-dark p-4 shadow-sm border border-gray-200/50 dark:border-gray-700 items-start">
                             <div className="flex items-center gap-2 mb-1">
                                <span className="material-symbols-outlined text-orange-500 text-[20px] filled">local_fire_department</span>
                                <p className="text-gray-500 dark:text-gray-400 text-xs font-medium uppercase tracking-wider">Streak</p>
                            </div>
                            <p className="text-[#0d121b] dark:text-white text-2xl font-bold leading-none">12 <span className="text-sm font-normal text-gray-400">Days</span></p>
                        </div>
                        <div className="flex flex-1 flex-col gap-1 rounded-2xl bg-white dark:bg-surface-dark p-4 shadow-sm border border-gray-200/50 dark:border-gray-700 items-start">
                            <div className="flex items-center gap-2 mb-1">
                                <span className="material-symbols-outlined text-yellow-500 text-[20px] filled">military_tech</span>
                                <p className="text-gray-500 dark:text-gray-400 text-xs font-medium uppercase tracking-wider">Level</p>
                            </div>
                            <p className="text-[#0d121b] dark:text-white text-2xl font-bold leading-none">14 <span className="text-sm font-normal text-gray-400">Master</span></p>
                        </div>
                    </div>

                    <div className="px-4 mb-8">
                         <h3 className="text-lg font-bold text-[#0d121b] dark:text-white mb-3 tracking-tight">Quick Access</h3>
                         <div className="grid grid-cols-2 gap-3">
                            <button onClick={() => navigate('/vocab')} className="group flex flex-col items-center justify-center gap-3 p-5 rounded-2xl bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800/30 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all active:scale-95">
                                <div className="size-12 rounded-full bg-blue-100 dark:bg-blue-800/50 flex items-center justify-center text-blue-600 dark:text-blue-300">
                                    <span className="material-symbols-outlined text-2xl">menu_book</span>
                                </div>
                                <span className="text-[#0d121b] dark:text-gray-100 font-bold text-sm">Vocabulary</span>
                            </button>
                            <button onClick={() => navigate('/kanji')} className="group flex flex-col items-center justify-center gap-3 p-5 rounded-2xl bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800/30 hover:bg-red-100 dark:hover:bg-red-900/30 transition-all active:scale-95">
                                <div className="size-12 rounded-full bg-red-100 dark:bg-red-800/50 flex items-center justify-center text-red-600 dark:text-red-300">
                                    <span className="material-symbols-outlined text-2xl">brush</span>
                                </div>
                                <span className="text-[#0d121b] dark:text-gray-100 font-bold text-sm">Kanji</span>
                            </button>
                            <button onClick={() => navigate('/grammar')} className="group flex flex-col items-center justify-center gap-3 p-5 rounded-2xl bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-800/30 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-all active:scale-95">
                                <div className="size-12 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center text-emerald-600 dark:text-emerald-300">
                                    <span className="material-symbols-outlined text-2xl">history_edu</span>
                                </div>
                                <span className="text-[#0d121b] dark:text-gray-100 font-bold text-sm">Grammar</span>
                            </button>
                             <button onClick={() => navigate('/review')} className="group flex flex-col items-center justify-center gap-3 p-5 rounded-2xl bg-purple-50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-800/30 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-all active:scale-95">
                                <div className="size-12 rounded-full bg-purple-100 dark:bg-purple-800/50 flex items-center justify-center text-purple-600 dark:text-purple-300">
                                    <span className="material-symbols-outlined text-2xl">headphones</span>
                                </div>
                                <span className="text-[#0d121b] dark:text-gray-100 font-bold text-sm">Listening</span>
                            </button>
                         </div>
                    </div>
                     <div className="px-4 mb-8">
                        <div className="flex justify-between items-center mb-3">
                            <h3 className="text-lg font-bold text-[#0d121b] dark:text-white tracking-tight">Continue Learning</h3>
                        </div>
                        <div onClick={() => navigate('/map')} className="flex flex-col rounded-2xl overflow-hidden shadow-lg shadow-blue-900/5 bg-white dark:bg-surface-dark border border-gray-200/50 dark:border-gray-700 group cursor-pointer transition-transform active:scale-[0.98]">
                            <div className="relative w-full aspect-video bg-gray-200" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCIgKkrJNu96UV_8j2m3L2ig5PTJMAfoULbbZG87ktM5SynT_mAK9QcAtX84lZOtEwXkWeh_aMwFnGgfknqf_CdjPZW6_z78idrUtnDCsYWjbr0UeQKcH1RapX5VveQtCyiCd3mGOxM81WdNPguACDeuLq8_i6TiJlp2Q82JdTwsCK8MrXx6HZScYrnaicHduHyoQ4c1GO5amX6zF58pm6Zh8H1lFel6IhHRRxRjg_Wa_oXTA34ull8tuHpoeOGZhANGLQGuRN6f_Y")', backgroundSize: 'cover', backgroundPosition: 'center'}}>
                                 <div className="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent flex items-end p-4">
                                    <span className="px-2 py-1 bg-primary/90 backdrop-blur-sm text-white text-xs font-bold rounded shadow-sm uppercase tracking-wide">Lesson 4</span>
                                </div>
                            </div>
                            <div className="p-4 pt-5">
                                <h4 className="text-[#0d121b] dark:text-white text-xl font-bold mb-1">Ordering at a Restaurant</h4>
                                <div className="flex items-center gap-2 mb-4">
                                    <span className="text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded">Speaking</span>
                                    <p className="text-gray-500 dark:text-gray-400 text-sm">Basic politeness forms</p>
                                </div>
                                <button className="bg-primary text-white px-6 py-2.5 rounded-lg text-sm font-bold shadow-md hover:bg-blue-700 transition-colors flex items-center gap-2">
                                    <span>Resume</span>
                                    <span className="material-symbols-outlined text-[18px]">play_arrow</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <BottomNav />
                </div>
            );
        };

        const MapScreen = () => {
             const navigate = useNavigate();
             return (
                <div className="relative flex h-full min-h-screen w-full flex-col mx-auto max-w-md bg-background-light dark:bg-background-dark shadow-2xl border-x border-slate-200 dark:border-slate-800 pb-20">
                    <BackHeader title="Adventure Map" />
                     <div className="flex-1 overflow-y-auto relative p-4">
                        <div className="absolute left-1/2 top-8 bottom-0 w-3 bg-slate-200 dark:bg-slate-800 -translate-x-1/2 rounded-full z-0"></div>
                        
                         <div className="relative z-10 flex flex-col items-center mt-8 mb-16">
                            <div className="bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400 text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest mb-2 border border-slate-300 dark:border-slate-600 shadow-sm">Start</div>
                        </div>

                         <div className="relative z-10 flex flex-col items-center mb-20 group cursor-pointer">
                            <div className="relative">
                                <div className="w-20 h-20 rounded-full bg-yellow-400 border-b-[6px] border-yellow-600 shadow-lg flex items-center justify-center">
                                    <span className="material-symbols-outlined text-yellow-800 text-4xl filled drop-shadow-sm">check_circle</span>
                                </div>
                            </div>
                            <span className="mt-4 font-bold text-slate-600 dark:text-slate-300 text-sm">Hiragana 1</span>
                        </div>

                        <div className="relative z-10 flex flex-col items-center mb-24 px-6 w-full">
                            <div className="mb-2 bg-primary text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg shadow-primary/30 uppercase tracking-wide">
                                Current Level
                            </div>
                            <div className="relative mb-4">
                                <div className="absolute inset-0 bg-primary/30 rounded-full blur-xl animate-pulse"></div>
                                <button onClick={() => navigate('/missions')} className="relative w-24 h-24 rounded-full bg-primary border-b-[8px] border-primary-dark shadow-glow flex items-center justify-center transform transition-transform active:scale-95 active:border-b-0 active:translate-y-[8px]">
                                    <span className="material-symbols-outlined text-white text-5xl filled">play_arrow</span>
                                </button>
                            </div>
                             <h3 className="text-xl font-black text-slate-800 dark:text-white mt-2">Basic Greetings</h3>
                        </div>

                         <div className="relative z-10 flex flex-col items-center mb-20 opacity-60">
                            <div className="relative">
                                <div className="w-20 h-20 rounded-full bg-slate-200 dark:bg-slate-700 border-b-[6px] border-slate-300 dark:border-slate-800 shadow-sm flex items-center justify-center">
                                    <span className="material-symbols-outlined text-slate-400 text-3xl">lock</span>
                                </div>
                            </div>
                            <span className="mt-3 font-bold text-slate-400 text-sm">Self Intro</span>
                        </div>
                     </div>
                     <BottomNav />
                </div>
             )
        }

        const MissionsScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="relative flex h-full min-h-screen w-full flex-col mx-auto max-w-md bg-background-light dark:bg-background-dark overflow-hidden shadow-2xl border-x border-slate-200 dark:border-slate-800 pb-20">
                    <BackHeader title="Missions" />
                    <div className="flex-1 overflow-y-auto no-scrollbar pb-24 px-4 pt-4">
                        <section className="mb-6">
                            <div className="bg-surface-light dark:bg-surface-dark rounded-2xl p-5 shadow-soft border border-slate-100 dark:border-slate-800">
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <h2 className="text-xl font-extrabold text-slate-900 dark:text-white">Today's Progress</h2>
                                        <p className="text-sm text-slate-500 dark:text-slate-400 font-medium">Keep up the momentum!</p>
                                    </div>
                                    <div className="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center">
                                        <span className="material-symbols-outlined text-primary text-2xl">trophy</span>
                                    </div>
                                </div>
                                <div className="h-3 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mb-5">
                                    <div className="h-full bg-primary rounded-full w-[60%] shadow-[0_0_10px_rgba(55,19,236,0.4)]"></div>
                                </div>
                                <button className="w-full flex items-center justify-center gap-2 h-11 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold text-sm transition-all active:scale-[0.98] shadow-lg shadow-primary/20">
                                    <span className="material-symbols-outlined text-[18px]">inventory_2</span>
                                    Claim All Rewards
                                </button>
                            </div>
                        </section>
                        
                        <div className="space-y-4">
                            <h3 className="text-slate-900 dark:text-white text-lg font-bold">Tasks</h3>
                             <div className="group relative flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 rounded-2xl shadow-soft border-2 border-primary/20 dark:border-primary/40 overflow-hidden">
                                <div className="absolute top-0 right-0 p-1.5 bg-green-500 text-white rounded-bl-xl text-[10px] font-bold tracking-wide uppercase shadow-sm z-10">Completed</div>
                                <div className="shrink-0 h-12 w-12 rounded-xl bg-green-100 dark:bg-green-900/20 flex items-center justify-center text-green-600 dark:text-green-400 border border-green-200 dark:border-green-800/30">
                                    <span className="material-symbols-outlined">quiz</span>
                                </div>
                                <div className="flex-1 min-w-0">
                                    <h4 className="font-bold text-slate-900 dark:text-white truncate">Perfect Quiz Score</h4>
                                    <div className="flex items-center gap-2 mt-1">
                                         <div className="flex items-center gap-1 bg-yellow-100 dark:bg-yellow-900/30 px-1.5 py-0.5 rounded text-yellow-700 dark:text-yellow-400 text-xs font-bold">
                                            <span className="material-symbols-outlined text-[14px]">monetization_on</span> +50
                                        </div>
                                    </div>
                                </div>
                                <button className="shrink-0 flex items-center justify-center h-9 px-4 rounded-lg bg-green-500 hover:bg-green-600 text-white text-sm font-bold shadow-lg shadow-green-500/30">Claim</button>
                            </div>

                             <div className="group flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 rounded-2xl shadow-soft border border-slate-100 dark:border-slate-800">
                                <div className="shrink-0 h-12 w-12 rounded-xl bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800/30">
                                    <span className="material-symbols-outlined">style</span>
                                </div>
                                <div className="flex-1 min-w-0">
                                    <h4 className="font-bold text-slate-900 dark:text-white truncate">Review Flashcards</h4>
                                    <div className="w-full bg-slate-100 dark:bg-slate-700 h-1.5 rounded-full mb-2 mt-1">
                                        <div className="bg-blue-500 h-1.5 rounded-full" style={{width: '75%'}}></div>
                                    </div>
                                </div>
                                <button onClick={() => navigate('/review')} className="shrink-0 flex items-center justify-center h-9 px-4 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-primary dark:text-indigo-400 text-sm font-bold border border-slate-200 dark:border-slate-700">Go</button>
                            </div>
                        </div>
                    </div>
                    <BottomNav />
                 </div>
             )
        }

        const ProfileScreen = () => {
             const navigate = useNavigate();
             return (
                <div className="relative flex min-h-screen w-full flex-col overflow-x-hidden pb-24 bg-background-light dark:bg-background-dark text-text-main dark:text-white">
                     <div className="sticky top-0 z-50 flex items-center bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm p-4 justify-between border-b border-gray-200 dark:border-gray-800">
                        <button onClick={() => navigate(-1)} className="flex size-10 items-center justify-center rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                            <span className="material-symbols-outlined">arrow_back</span>
                        </button>
                        <h2 className="text-lg font-bold leading-tight tracking-[-0.015em]">Profile</h2>
                        <div className="w-10"></div>
                    </div>

                    <section className="flex flex-col items-center pt-6 px-4 pb-2">
                        <div className="relative mb-4">
                            <div className="bg-center bg-no-repeat bg-cover rounded-full h-28 w-28 border-4 border-white dark:border-surface-dark shadow-lg" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAtMJeg8iCLFWsP0SHZnf8_TNJVzEo7KVRBxcLHpU3cHfdgoZdmGfqprJBX8gILd75DLWdnUckMGCAGFEM4usRscUxwnKGaxLIYH1RLhg_4lH-Xgy82bCJLCr93011QlJaWIt8OkE3BRjmc6wZBp47fu5Fp-5jLcyRRM2r6wrDd0G9AYOBeKG3Fyojy96vxYfN4v7v1PEhsf0KN7x-jDQfCUNe89G8L4YL4x3qK1NNjYSfJDKpFs2qdqjlsceNjUs8ofyvrfaDRUMY")'}}></div>
                            <div className="absolute bottom-0 right-0 bg-gray-200 dark:bg-gray-700 text-xs font-bold px-2 py-1 rounded-full border-2 border-white dark:border-surface-dark text-gray-600 dark:text-gray-300">FREE</div>
                        </div>
                        <h1 className="text-2xl font-bold mb-1">Kenji Tanaka</h1>
                        <p className="text-text-muted dark:text-gray-400 font-medium text-sm">Level: N5 Beginner</p>
                    </section>

                    <section className="flex flex-wrap gap-3 p-4">
                         <div className="flex flex-1 min-w-[100px] flex-col items-center gap-1 rounded-xl p-4 bg-surface-light dark:bg-surface-dark shadow-sm border border-gray-100 dark:border-gray-800">
                            <span className="material-symbols-outlined text-orange-500 filled">local_fire_department</span>
                            <p className="text-2xl font-bold">12</p>
                            <p className="text-xs font-medium text-text-muted dark:text-gray-400 uppercase tracking-wide">Streak</p>
                        </div>
                        <div className="flex flex-1 min-w-[100px] flex-col items-center gap-1 rounded-xl p-4 bg-surface-light dark:bg-surface-dark shadow-sm border border-gray-100 dark:border-gray-800">
                            <span className="material-symbols-outlined text-yellow-500 filled">bolt</span>
                            <p className="text-2xl font-bold">450</p>
                            <p className="text-xs font-medium text-text-muted dark:text-gray-400 uppercase tracking-wide">XP</p>
                        </div>
                         <div className="flex flex-1 min-w-[100px] flex-col items-center gap-1 rounded-xl p-4 bg-surface-light dark:bg-surface-dark shadow-sm border border-gray-100 dark:border-gray-800">
                            <span className="material-symbols-outlined text-primary filled">menu_book</span>
                            <p className="text-2xl font-bold">120</p>
                            <p className="text-xs font-medium text-text-muted dark:text-gray-400 uppercase tracking-wide">Words</p>
                        </div>
                    </section>

                     <section className="px-4 pb-4">
                        <div onClick={() => navigate('/premium')} className="relative overflow-hidden rounded-xl bg-gradient-to-r from-primary to-blue-600 p-5 shadow-lg shadow-blue-500/20 cursor-pointer">
                             <div className="absolute right-0 top-0 h-full w-1/2 opacity-10" style={{backgroundImage: 'radial-gradient(#fff 1px, transparent 1px)', backgroundSize: '10px 10px'}}></div>
                             <div className="relative z-10 flex items-center justify-between gap-4">
                                <div className="flex flex-col gap-1">
                                    <h3 className="text-white text-lg font-bold">Go Premium</h3>
                                    <p className="text-blue-100 text-sm">Remove ads and unlock features.</p>
                                </div>
                                <button className="shrink-0 rounded-lg bg-white px-4 py-2 text-sm font-bold text-primary shadow-sm">Upgrade</button>
                            </div>
                        </div>
                    </section>

                    <section className="flex flex-col py-4">
                         <div onClick={() => navigate('/rewards')} className="flex items-center justify-between px-4 pb-3 cursor-pointer">
                            <h3 className="text-lg font-bold">Achievements</h3>
                            <button className="text-primary text-sm font-semibold">See All</button>
                        </div>
                        <div className="flex gap-4 overflow-x-auto px-4 pb-2 no-scrollbar snap-x">
                            <div className="flex min-w-[110px] snap-center flex-col items-center gap-2 rounded-xl bg-surface-light dark:bg-surface-dark p-4 shadow-sm border border-gray-100 dark:border-gray-800">
                                <div className="flex h-14 w-14 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900/30">
                                    <span className="material-symbols-outlined text-3xl text-orange-500">local_fire_department</span>
                                </div>
                                <p className="text-xs font-bold text-center line-clamp-1">Week Streak</p>
                            </div>
                             <div className="flex min-w-[110px] snap-center flex-col items-center gap-2 rounded-xl bg-surface-light dark:bg-surface-dark p-4 shadow-sm border border-gray-100 dark:border-gray-800">
                                <div className="flex h-14 w-14 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30">
                                    <span className="material-symbols-outlined text-3xl text-green-500">translate</span>
                                </div>
                                <p className="text-xs font-bold text-center line-clamp-1">Hiragana Hero</p>
                            </div>
                        </div>
                    </section>
                    <BottomNav />
                </div>
             )
        }
        
        const PremiumScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="relative flex h-full min-h-screen w-full flex-col bg-background-light dark:bg-background-dark pb-32">
                    <div className="flex items-center justify-between p-4 sticky top-0 z-20 backdrop-blur-md bg-opacity-90 dark:bg-opacity-90">
                        <button onClick={() => navigate(-1)} className="flex size-10 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors text-[#0d121b] dark:text-white">
                            <span className="material-symbols-outlined text-[24px]">close</span>
                        </button>
                    </div>
                     <div className="px-4 py-2">
                         <div className="relative flex flex-col justify-end overflow-hidden rounded-xl min-h-[240px] shadow-sm ring-1 ring-black/5 dark:ring-white/10">
                            <div className="absolute inset-0 bg-cover bg-center" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCvxikC1rCIq4fcX0jiz3ZtueAjJB1gxE6wztauxK6HE-aPTM4l2Ta4IY9vFmi9rNanzgJfeWiDzDoYdmPBKy97x_6GJOOD_1PKW1WpCs5QnS1HxTEg--08H3BzN-thbhijbMt9AZid1JTKn7EOC-jIminXJ71hlhkYpRstJV-v5BepZYoYws2lkBSFF7doKfffXdDgahsc8KJ6YhP9A-s0itTetLYBuqr-S65hAAFA_PME-hwV7E_wGoXt5XZ3S8be4U1uSe0aT8k")'}}></div>
                            <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"></div>
                            <div className="relative flex flex-col p-6 z-10">
                                <div className="mb-2 flex items-center gap-2">
                                    <span className="material-symbols-outlined text-yellow-400 text-[28px] filled">workspace_premium</span>
                                    <span className="uppercase tracking-widest text-xs font-bold text-yellow-400">Premium</span>
                                </div>
                                <h1 className="text-white tracking-tight text-3xl font-bold leading-tight drop-shadow-sm">Master Japanese Faster</h1>
                                <p className="text-white/90 text-sm font-medium mt-2 leading-relaxed">Unlock the full potential of your learning journey.</p>
                            </div>
                        </div>
                     </div>
                     <div className="px-6 py-6">
                        <div className="grid gap-y-5">
                            <div className="flex gap-4 items-start">
                                <div className="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                                    <span className="material-symbols-outlined text-[20px]">block</span>
                                </div>
                                <div className="flex flex-col pt-0.5">
                                    <p className="text-[#0d121b] dark:text-white text-base font-semibold">No Ads</p>
                                    <p className="text-[#4c669a] dark:text-[#94a3b8] text-sm font-normal">Study without interruptions</p>
                                </div>
                            </div>
                            <div className="flex gap-4 items-start">
                                <div className="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                                    <span className="material-symbols-outlined text-[20px]">wifi_off</span>
                                </div>
                                <div className="flex flex-col pt-0.5">
                                    <p className="text-[#0d121b] dark:text-white text-base font-semibold">Offline Access</p>
                                    <p className="text-[#4c669a] dark:text-[#94a3b8] text-sm font-normal">Learn anywhere, anytime</p>
                                </div>
                            </div>
                        </div>
                     </div>
                      <div className="fixed bottom-0 left-0 right-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-xl border-t border-[#cfd7e7]/50 dark:border-white/5 px-4 py-4 pb-8 safe-area-bottom">
                        <div className="max-w-md mx-auto w-full flex flex-col gap-3">
                             <div className="flex flex-col gap-1 text-center mb-1">
                                <p className="text-xs text-[#0d121b] dark:text-white/90">
                                    <span className="font-bold">7-day free trial</span>, then $59.99/year
                                </p>
                            </div>
                            <button className="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-4 bg-primary text-white text-base font-bold shadow-lg shadow-primary/30 transition-transform active:scale-[0.98]">
                                Try Free & Subscribe
                            </button>
                        </div>
                    </div>
                 </div>
             )
        }

        const KanjiScreen = () => {
             const navigate = useNavigate();
             return (
                <div className="relative flex h-full min-h-screen w-full flex-col overflow-x-hidden pb-24 bg-background-light dark:bg-background-dark text-slate-900 dark:text-white">
                    <BackHeader title="Kanji Practice" />
                    <main className="flex flex-col gap-6 p-4">
                         <div className="group relative overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm ring-1 ring-slate-900/5 dark:ring-white/10">
                             <div className="absolute inset-0 z-0 opacity-10 dark:opacity-20 bg-cover bg-center transition-transform duration-700 group-hover:scale-105" style={{backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBW2FephIXKyjAxPD8pPADsUE-QpWZZzL5CEA47EKgqfc4yfBAPQoGZ5TiXU6wVgmQefXLJs0N75Jl85x4Vm2cOFSaX3c1NzLNBVzBWkHBK80YnrmyMbaYCI2rE-sPCxa95-tQgaqtkk5NXF3EORVzRbjeN0LnDsVGKGh1mlcfqBi32kus_PLIbYAHNC2VGxl_UKyoW_50dF0HP6nkK_bhjE5_qbA5S4ZwDCv-xsGw0k_NaZbaAydW9Bmp3aU5zGasmYTTEGlDA7Jc")'}}></div>
                             <div className="relative z-10 flex flex-col items-center justify-center py-10 px-4 text-center">
                                <span className="text-xs font-bold tracking-widest text-primary uppercase mb-2">Water</span>
                                <h1 className="text-8xl font-bold font-japanese mb-4 drop-shadow-sm">水</h1>
                                <button className="flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-blue-600 text-white rounded-full shadow-lg shadow-blue-500/30">
                                    <span className="material-symbols-outlined text-[20px]">play_arrow</span>
                                    <span className="text-sm font-bold">Animate</span>
                                </button>
                            </div>
                         </div>
                         <div className="bg-slate-100 dark:bg-slate-800 p-1 rounded-xl flex text-sm font-medium">
                            <button className="flex-1 py-2 px-4 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm">Readings</button>
                            <button className="flex-1 py-2 px-4 rounded-lg text-slate-500 dark:text-slate-400">Vocabulary</button>
                        </div>
                        <section className="space-y-4">
                             <div className="grid grid-cols-2 gap-4">
                                <div className="flex flex-col p-4 rounded-xl bg-surface-light dark:bg-surface-dark border border-slate-100 dark:border-slate-800 shadow-sm">
                                    <span className="text-xs font-bold text-primary mb-2 uppercase tracking-wide">Onyomi</span>
                                    <div className="flex items-end gap-2">
                                        <span className="text-2xl font-japanese font-bold">スイ</span>
                                        <span className="text-sm text-slate-400 dark:text-slate-500 mb-1">sui</span>
                                    </div>
                                </div>
                                 <div className="flex flex-col p-4 rounded-xl bg-surface-light dark:bg-surface-dark border border-slate-100 dark:border-slate-800 shadow-sm">
                                    <span className="text-xs font-bold text-primary mb-2 uppercase tracking-wide">Kunyomi</span>
                                    <div className="flex items-end gap-2">
                                        <span className="text-2xl font-japanese font-bold">みず</span>
                                        <span className="text-sm text-slate-400 dark:text-slate-500 mb-1">mizu</span>
                                    </div>
                                </div>
                             </div>
                        </section>
                    </main>
                    <div className="fixed bottom-0 w-full p-4 bg-background-light/95 dark:bg-background-dark/95 border-t border-slate-200 dark:border-slate-800 backdrop-blur-md z-50 safe-area-bottom">
                        <button className="w-full flex cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 bg-primary hover:bg-blue-600 text-white gap-2 text-lg font-bold shadow-lg shadow-blue-900/10 active:scale-[0.98]">
                            <span className="material-symbols-outlined">edit_square</span>
                            <span>Start Writing Practice</span>
                        </button>
                    </div>
                </div>
             )
        }

        const VocabScreen = () => {
             const navigate = useNavigate();
             return (
                <div className="bg-gray-100 dark:bg-gray-900 flex justify-center items-center min-h-screen p-0 sm:p-4">
                    <div className="relative flex h-full sm:h-[844px] w-full sm:max-w-[390px] flex-col bg-background-light dark:bg-background-dark sm:rounded-[40px] shadow-2xl overflow-hidden group/design-root font-display ring-8 ring-black/5 dark:ring-white/5">
                        <header className="flex items-center bg-background-light dark:bg-background-dark px-6 pt-12 pb-4 justify-between sticky top-0 z-20">
                            <button onClick={() => navigate(-1)} className="text-slate-800 dark:text-white flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                                <span className="material-symbols-outlined">arrow_back</span>
                            </button>
                            <div className="flex flex-col items-center">
                                <h2 className="text-slate-800 dark:text-white text-sm font-semibold tracking-wide uppercase opacity-70">JLPT N5 Verbs</h2>
                            </div>
                            <div className="flex items-center justify-end">
                                <div className="bg-primary/10 dark:bg-primary/20 text-primary px-3 py-1 rounded-full">
                                    <p className="text-sm font-bold leading-normal tracking-[0.015em] shrink-0">5/20</p>
                                </div>
                            </div>
                        </header>
                         <div className="w-full h-1 bg-slate-200 dark:bg-slate-800 mt-0">
                            <div className="h-full bg-primary w-[25%] rounded-r-full"></div>
                        </div>
                        <main className="flex-1 overflow-y-auto no-scrollbar pb-32">
                             <div className="p-6 flex flex-col gap-6">
                                 <div className="relative w-full aspect-[4/5] flex flex-col items-center justify-between rounded-2xl bg-surface-light dark:bg-surface-dark shadow-soft p-6 border border-slate-100 dark:border-slate-700">
                                     <div className="w-full flex justify-between items-start">
                                        <span className="px-3 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-lg text-xs font-bold uppercase tracking-wider">New Word</span>
                                        <button className="text-slate-400 hover:text-primary transition-colors">
                                            <span className="material-symbols-outlined">bookmark_border</span>
                                        </button>
                                    </div>
                                    <div className="flex flex-col items-center gap-4 w-full">
                                         <div className="w-32 h-32 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center overflow-hidden mb-2 ring-4 ring-white dark:ring-slate-700 shadow-md">
                                            <div className="w-full h-full bg-center bg-cover" style={{backgroundImage: "url('https://lh3.googleusercontent.com/aida-public/AB6AXuDSgv2sHTC7fEuKU4qEioUoAdN1I5SAKmZBaQLTfVMck9mI9QVVoty8C-GDMD5CI6xwtEgnWfOpMcrHuvy6yAyOqu68fPZJOLPjYdxICBKTa9gvjhkexH_ZjpLkOvD-392ri4wywruLmq7Jrws7kK19g0-FXfdN73UXu7VYutS9gkhNneXTlFho5xHRLEUZMZ-UM6Rv4rZFudS5ttMQHxC37N54lcK03VoskQj3Z-XDQvorwiZkFYE2ayinpPlpn9oP3AvXorHIsb4')"}}></div>
                                        </div>
                                        <div className="text-center space-y-1">
                                            <h1 className="text-6xl font-bold text-slate-900 dark:text-white leading-tight">猫</h1>
                                            <p className="text-xl text-primary font-medium">ねこ</p>
                                        </div>
                                    </div>
                                     <div className="w-full flex flex-col items-center gap-4">
                                        <div className="w-full h-px bg-slate-100 dark:bg-slate-700"></div>
                                        <div className="flex w-full items-center justify-between px-2">
                                            <p className="text-2xl font-semibold text-slate-800 dark:text-slate-200">Cat</p>
                                            <button className="flex size-12 items-center justify-center rounded-full bg-primary text-white shadow-glow hover:scale-105 active:scale-95 transition-transform">
                                                <span className="material-symbols-outlined" style={{fontSize: '28px'}}>volume_up</span>
                                            </button>
                                        </div>
                                    </div>
                                 </div>
                             </div>
                        </main>
                        <div className="absolute bottom-0 w-full bg-gradient-to-t from-white via-white to-white/0 dark:from-background-dark dark:via-background-dark dark:to-background-dark/0 pt-12 pb-8 px-6 z-10">
                            <div className="flex items-center gap-4">
                                <button className="flex-1 flex flex-col items-center justify-center gap-1 group">
                                    <div className="flex h-14 w-full items-center justify-center rounded-xl bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-300 group-active:scale-95 transition-all">
                                        <span className="material-symbols-outlined">restart_alt</span>
                                    </div>
                                    <span className="text-xs font-semibold text-slate-500 dark:text-slate-400">Study again</span>
                                </button>
                                <button className="flex-[2] flex flex-col items-center justify-center gap-1 group">
                                    <div className="flex h-14 w-full items-center justify-center rounded-xl bg-primary text-white shadow-lg shadow-primary/30 group-active:scale-95 transition-all">
                                        <span className="text-base font-bold mr-2">I know this</span>
                                        <span className="material-symbols-outlined">check_circle</span>
                                    </div>
                                    <span className="text-xs font-semibold text-primary">Easy</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
             )
        }

        const GrammarScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="relative flex h-full min-h-screen w-full flex-col overflow-hidden max-w-md mx-auto shadow-2xl bg-background-light dark:bg-background-dark text-[#0d121b] dark:text-white">
                    <BackHeader title="Expressing Desire with 〜たい" />
                    <div className="w-full h-1 bg-gray-200 dark:bg-gray-800">
                        <div className="h-full bg-primary rounded-r-full" style={{width: '35%'}}></div>
                    </div>
                    <main className="flex-1 overflow-y-auto p-4 pb-24 space-y-6">
                        <div className="w-full rounded-2xl bg-gradient-to-br from-primary to-[#0042c7] p-6 text-white shadow-lg shadow-primary/20 relative overflow-hidden">
                             <div className="absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-2xl pointer-events-none"></div>
                             <div className="relative z-10 flex flex-col gap-4">
                                <div>
                                    <span className="inline-block px-2 py-1 bg-white/20 rounded text-xs font-semibold tracking-wider uppercase mb-2">Grammar Point</span>
                                    <h2 className="text-3xl font-bold font-japanese tracking-wide mb-1">〜たい</h2>
                                    <p className="text-blue-100 text-sm font-medium">polite: 〜たいです</p>
                                </div>
                                 <div className="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                                    <div className="flex flex-col gap-2">
                                        <div className="flex items-center gap-2 text-lg">
                                            <span className="font-bold opacity-80">[ Verb Stem ]</span>
                                            <span className="material-symbols-outlined text-sm">add</span>
                                            <span className="font-bold text-white bg-white/20 px-2 py-0.5 rounded">たい</span>
                                        </div>
                                        <div className="h-px w-full bg-white/20 my-1"></div>
                                        <p className="text-base font-medium">Meaning: "I want to [verb]"</p>
                                    </div>
                                </div>
                             </div>
                        </div>
                        <section>
                             <h3 className="tracking-tight text-xl font-bold leading-tight mb-4 px-1">Examples</h3>
                             <div className="flex flex-col gap-4">
                                <div className="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start group">
                                    <button className="shrink-0 size-10 rounded-full bg-primary/10 text-primary flex items-center justify-center mt-1">
                                        <span className="material-symbols-outlined filled">play_arrow</span>
                                    </button>
                                    <div className="flex-1 flex flex-col gap-1.5">
                                        <p className="text-lg font-bold font-japanese leading-relaxed">
                                            <ruby>日本<rt>にほん</rt></ruby>に<ruby>行<rt>い</rt></ruby>き<span className="text-primary">たい</span>です。
                                        </p>
                                        <p className="text-gray-500 dark:text-gray-400 text-sm font-medium">Nihon ni ikitai desu.</p>
                                        <p className="text-base">I want to go to Japan.</p>
                                    </div>
                                </div>
                             </div>
                        </section>
                    </main>
                    <footer className="absolute bottom-0 left-0 w-full bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 pb-6 backdrop-blur-xl bg-opacity-90 dark:bg-opacity-90">
                        <button className="w-full bg-primary hover:bg-blue-700 active:scale-[0.99] transition-all text-white font-bold text-lg h-14 rounded-xl shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2">
                            Continue <span className="material-symbols-outlined text-[20px]">arrow_forward</span>
                        </button>
                    </footer>
                 </div>
             )
        }

        const ReviewScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display min-h-screen flex flex-col antialiased">
                     <div className="sticky top-0 z-10 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm pt-safe-top">
                        <div className="flex items-center justify-between px-4 py-3">
                            <h2 className="text-lg font-bold leading-tight tracking-[-0.015em] flex-1">Review Session</h2>
                            <button onClick={() => navigate(-1)} className="flex items-center justify-center w-10 h-10 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors text-slate-500 dark:text-slate-400">
                                <span className="material-symbols-outlined" style={{fontSize: '24px'}}>close</span>
                            </button>
                        </div>
                        <div className="px-4 pb-4">
                            <div className="h-2 w-full bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div className="h-full bg-primary rounded-full" style={{width: '24%'}}></div>
                            </div>
                        </div>
                    </div>
                    <div className="flex-1 flex flex-col px-4 pb-32 overflow-y-auto no-scrollbar">
                         <div className="flex flex-col w-full max-w-md mx-auto my-auto gap-4">
                             <div className="relative bg-surface-light dark:bg-surface-dark rounded-2xl shadow-soft p-6 border border-slate-100 dark:border-slate-800 flex flex-col items-center">
                                <div className="mt-4 mb-2 w-full text-center">
                                    <h1 className="text-6xl font-bold text-slate-900 dark:text-white mb-2 tracking-wide py-8">勉強</h1>
                                </div>
                                <div className="w-full flex flex-col items-center">
                                    <div className="relative w-full flex items-center justify-center my-4">
                                        <div className="w-full border-t border-slate-100 dark:border-slate-700 absolute"></div>
                                        <button className="flex items-center justify-center w-12 h-12 bg-primary rounded-full shadow-lg text-white z-10">
                                            <span className="material-symbols-outlined" style={{fontSize: '24px'}}>volume_up</span>
                                        </button>
                                    </div>
                                    <div className="text-center space-y-1">
                                        <p className="text-xl text-slate-500 dark:text-slate-400 font-medium">べんきょう</p>
                                        <h2 className="text-2xl font-bold text-slate-800 dark:text-slate-100">Study</h2>
                                    </div>
                                </div>
                             </div>
                         </div>
                    </div>
                     <div className="fixed bottom-0 left-0 right-0 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-t border-slate-200 dark:border-slate-800 p-4 pb-8 z-20">
                        <div className="max-w-md mx-auto grid grid-cols-4 gap-3">
                             <button className="flex flex-col items-center justify-center gap-1 group">
                                <div className="h-14 w-full rounded-xl bg-red-50 dark:bg-red-900/20 border-2 border-transparent text-grade-again flex items-center justify-center font-bold text-sm">Again</div>
                                <span className="text-[10px] text-slate-400 font-medium">1m</span>
                            </button>
                             <button className="flex flex-col items-center justify-center gap-1 group">
                                <div className="h-14 w-full rounded-xl bg-primary text-white shadow-lg shadow-primary/20 flex items-center justify-center font-bold text-sm">Good</div>
                                <span className="text-[10px] text-primary font-medium">10m</span>
                            </button>
                        </div>
                    </div>
                 </div>
             )
        }

        const LeaderboardScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-xl overflow-hidden pb-20">
                     <BackHeader title="Leaderboard" />
                     <div className="px-4 py-2 z-10">
                        <div className="flex h-10 w-full items-center justify-center rounded-lg bg-gray-200 dark:bg-gray-800 p-1">
                            <label className="flex cursor-pointer h-full flex-1 items-center justify-center overflow-hidden rounded-[0.25rem] transition-all bg-white dark:bg-card-dark shadow-sm text-primary">
                                <span className="text-sm font-bold truncate">Global</span>
                            </label>
                            <label className="flex cursor-pointer h-full flex-1 items-center justify-center overflow-hidden rounded-[0.25rem] transition-all text-text-sec-light dark:text-text-sec-dark">
                                <span className="text-sm font-medium truncate">Friends</span>
                            </label>
                        </div>
                    </div>
                    <div className="flex-1 overflow-y-auto no-scrollbar pb-24">
                        <div className="pt-6 pb-8 px-4">
                            <div className="flex items-end justify-center gap-2 sm:gap-4 h-48">
                                {/* 2nd */}
                                <div className="flex flex-col items-center justify-end w-1/3 z-10">
                                    <div className="relative mb-2">
                                        <div className="w-16 h-16 rounded-full border-4 border-[#C0C0C0] overflow-hidden bg-gray-300">
                                            <img className="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAckqWV0eviP9CyZYKJ46EgkW3PpZrsp1YNXLNLCASbZLIf7C9RRcFUt4fSOJOfH6U0UKGHcSaExlHCgumObI8PZ8UdUPhSrkyH-Qrp8bj5x4UnMaWsIgH2PxZYcIO5ssXhQhmcvgu9a3Zqej2EyhhXiOVaYx7BZwkV2dVF2av6dzyElX0L9FQh3CUR1wLWT0ndF7zJKaxsslVoMrdd0k1tXjksd3wN_cf_ZeeKcbSxUOy5I46F-nQEjNVM9GKr07zn9fbr7oWT-Vs"/>
                                        </div>
                                        <div className="absolute -bottom-2 left-1/2 -translate-x-1/2 bg-[#C0C0C0] text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm">2</div>
                                    </div>
                                    <p className="font-bold text-sm truncate w-full text-center">Haruto</p>
                                    <div className="w-full h-24 bg-gradient-to-t from-[#C0C0C0]/20 to-[#C0C0C0]/5 rounded-t-lg relative"></div>
                                </div>
                                {/* 1st */}
                                <div className="flex flex-col items-center justify-end w-1/3 z-20 -mb-2">
                                     <div className="relative mb-2">
                                        <div className="absolute -top-6 left-1/2 -translate-x-1/2 text-[#FFD700] animate-bounce">
                                            <span className="material-symbols-outlined !text-[32px] filled">crown</span>
                                        </div>
                                        <div className="w-20 h-20 rounded-full border-4 border-[#FFD700] overflow-hidden bg-gray-300 shadow-[0_0_15px_rgba(255,215,0,0.3)]">
                                            <img className="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBwmMBSXkXTO3YBMVsGvHlznmJWxnxLMbgf6gzfcFpj8AkwcSscC_XvLZt9ABjt9sIbMkXP3ZUiZ__JK_iQiYkj0EEBaNm7it26wwMTWyLy-O6apKlpRxZUZYBGaTsRsY_JDA2aT-AiNcXIyqHgTRJMMQ-hb7gre3elw0zVs3_Mczo-tUFaa15LNP2Tt2kvjT31zOeBNPJa8G2TpdyGqHoxjQ9Hdso6zb8AbR0xLoY35eZlAMZlz8md2uXVUI2KK3DC-pRTRPOOZqo"/>
                                        </div>
                                         <div className="absolute -bottom-2 left-1/2 -translate-x-1/2 bg-[#FFD700] text-[#8B4513] text-xs font-bold px-2.5 py-0.5 rounded-full shadow-sm">1</div>
                                     </div>
                                     <p className="font-bold text-base truncate w-full text-center text-[#FFD700]">Sakura</p>
                                     <div className="w-full h-32 bg-gradient-to-t from-[#FFD700]/20 to-[#FFD700]/5 rounded-t-lg relative"></div>
                                </div>
                                {/* 3rd */}
                                <div className="flex flex-col items-center justify-end w-1/3 z-10">
                                    <div className="relative mb-2">
                                        <div className="w-16 h-16 rounded-full border-4 border-[#CD7F32] overflow-hidden bg-gray-300">
                                            <img className="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCNs0Q3Lzxr3KVft6H6pEJpvARLR0fzsAsX953wv_DtaMXaNmBnU-1KCuEJjkOkrj1DJ1YvrDnn1ahrV_W7dreHUIy50Mr5U0VP0yIysANWzqAPm-adAT_BjwdVYSaKRvcfsYGgL6RQAiFD3w1gx-AqxZ8j5J5f01A-5u5alkjqAgn15tPyj0GBGvATzj0-DjHjKxN78CEunzIRqHf9mGH9iLTc3k-6QqcdXGDc11Kf6V4oztGw1yMIMiRfCVusWaI41XwWdV22gSQ"/>
                                        </div>
                                        <div className="absolute -bottom-2 left-1/2 -translate-x-1/2 bg-[#CD7F32] text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm">3</div>
                                    </div>
                                    <p className="font-bold text-sm truncate w-full text-center">Ryu</p>
                                    <div className="w-full h-16 bg-gradient-to-t from-[#CD7F32]/20 to-[#CD7F32]/5 rounded-t-lg relative"></div>
                                </div>
                            </div>
                        </div>
                        <div className="flex flex-col px-4 gap-3">
                            <div className="flex items-center gap-3 bg-card-light dark:bg-card-dark rounded-lg p-3 shadow-sm border border-gray-100 dark:border-gray-800">
                                <span className="text-text-sec-light dark:text-text-sec-dark font-bold w-6 text-center text-sm">4</span>
                                <div className="w-12 h-12 rounded-full overflow-hidden bg-gray-200">
                                    <img className="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCmUgAmNHaYEfTU7wKi8vzuRWIORZsMJKuMzvGh19z99m4HNZCRj9oL9OyMNsjS1ejaG8BTQMs7CHDcAKG8SZXY6aKbUHHvzuc-6BelmTRi3en_J_oeT1E9QXKiY3-IgNCD2o-EkpuFAkWDY0qSr0mgieKUU8kDfu-081Px-Xw2fV2_5qQYZIthRxxmgz4shwF906dUA6m_Nd7jLQHKlEmcNBSKceYU0fHcwqKEhbkb564mkrMBRIPJokpsG1EE1i5kfFdN1rr1P3o"/>
                                </div>
                                <div className="flex flex-col flex-1 min-w-0">
                                    <p className="text-text-main-light dark:text-white text-sm font-bold truncate">Yuki</p>
                                    <p className="text-primary text-xs font-semibold">12,450 XP</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="fixed bottom-16 w-full max-w-md bg-card-light dark:bg-card-dark border-t border-gray-200 dark:border-gray-800 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-30 pb-safe">
                        <div className="p-4 flex items-center gap-3">
                            <div className="flex flex-col items-center justify-center w-8 shrink-0">
                                <span className="material-symbols-outlined text-green-500 text-lg">arrow_drop_up</span>
                                <span className="text-text-main-light dark:text-white font-bold text-sm leading-none">42</span>
                            </div>
                            <div className="relative shrink-0">
                                <div className="w-12 h-12 rounded-full overflow-hidden border-2 border-primary">
                                    <img className="w-full h-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuD3ajV4xZwNSIl9CRbwwnC0vuqIF_8RVHoGNKUZjFXFAfjdrtFfHqbxG_n3wkozEVrLy3ymUJfZFlAXwobW7sRw_xOB2YoGmUv2kyANRfp89AFQRZYxdHrYcdaBTehjw2Jjj9vofZOuANfik8hXLlGsXUVMBAbusccTa65tl1auWBRyq82tfgWX2PotqbE4XXY-4OJDUCd87rcQxBN774BqflIPQvLgtMhA0GCMtK_1lbf2nEubEB9Qrp2Yg1VGU12JDa0Lawxcjvc"/>
                                </div>
                            </div>
                            <div className="flex flex-col flex-1 min-w-0">
                                <div className="flex items-center gap-2">
                                    <p className="text-text-main-light dark:text-white text-sm font-bold truncate">You</p>
                                    <span className="bg-primary/20 text-primary text-[10px] px-1.5 py-0.5 rounded font-bold uppercase">Pro</span>
                                </div>
                                <p className="text-text-sec-light dark:text-text-sec-dark text-xs font-medium">5,300 XP</p>
                            </div>
                        </div>
                    </div>
                     <BottomNav />
                 </div>
             )
        }

        const RewardsScreen = () => {
             const navigate = useNavigate();
             return (
                 <div className="relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-xl overflow-hidden pb-20">
                    <BackHeader title="Rewards" />
                     <div className="sticky top-14 z-40 bg-[#111722] border-b border-white/5 shadow-md">
                        <div className="flex items-center p-4 justify-between">
                            <h2 className="text-white text-xl font-bold leading-tight flex-1">Rewards Center</h2>
                            <div className="flex items-center justify-end gap-2 bg-[#1E293B] px-3 py-1.5 rounded-full border border-white/10">
                                <span className="material-symbols-outlined text-yellow-400 text-sm">payments</span>
                                <p className="text-yellow-400 text-sm font-bold leading-normal shrink-0">1,250 💴</p>
                            </div>
                        </div>
                     </div>
                     <div className="flex flex-col gap-6 pt-2">
                         <div className="grid grid-cols-3 gap-4 px-4">
                            <div className="flex flex-col items-center gap-2 group">
                                <div className="relative flex items-center justify-center w-full aspect-square bg-gradient-to-br from-indigo-900 to-[#1E293B] rounded-2xl border border-primary/30 shadow-lg shadow-primary/10">
                                    <span className="material-symbols-outlined text-4xl text-yellow-400">military_tech</span>
                                    <div className="absolute -top-1 -right-1 bg-yellow-500 text-[10px] font-bold text-black px-1.5 rounded-full">NEW</div>
                                </div>
                                <p className="text-xs text-center font-medium text-slate-300">Hiragana Hero</p>
                            </div>
                            <div className="flex flex-col items-center gap-2">
                                <div className="flex items-center justify-center w-full aspect-square bg-[#1E293B] rounded-2xl border border-white/5">
                                    <span className="material-symbols-outlined text-4xl text-blue-400">translate</span>
                                </div>
                                <p className="text-xs text-center font-medium text-slate-300">Word Smith</p>
                            </div>
                         </div>
                         <div className="pb-6">
                            <div className="flex items-center justify-between px-4 pb-3 pt-4">
                                <h3 className="text-white text-lg font-bold leading-tight">Featured Rewards</h3>
                            </div>
                            <div className="flex overflow-x-auto px-4 gap-4 no-scrollbar pb-2">
                                <div className="flex-shrink-0 w-40 flex flex-col gap-2 rounded-xl bg-card-dark p-3 border border-white/5 cursor-pointer">
                                    <div className="aspect-[4/5] w-full rounded-lg bg-gradient-to-b from-slate-700 to-slate-800 relative overflow-hidden">
                                        <img className="absolute inset-0 w-full h-full object-cover opacity-80 mix-blend-overlay" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAJVj6FixqXSJZGcxnH0Tijjpgjj8DiJTbTiFShwHOPpjVIuCN4WPI_eZEzMnQfbYaI_VXYgKht1Y590b6-Ha2qc5ovX9JIXGWAYcJYaWyj-j_fgNiQL-reVmCfxZU_GKAkHXnBlP9V1i78qfxe6IJ230dCVfCUA0--alJeagJu7cvpigxEoU6o7LIyjUXFaBPRXGk3lqyjJBGekF0uEru_zexR3b3wuHUZPPloE8HC6KEfD8SEXJUTTBuUb0W0mbGzlF_RBkZaECo"/>
                                        <div className="absolute bottom-2 left-2 right-2">
                                            <span className="px-2 py-1 rounded bg-blue-500/20 text-blue-200 text-[10px] font-bold backdrop-blur-sm border border-blue-500/30">SKIN</span>
                                        </div>
                                    </div>
                                    <div className="flex flex-col gap-1">
                                        <span className="text-sm font-bold text-white truncate">Kyoto Background</span>
                                        <span className="text-xs text-yellow-400 font-bold">350 💴</span>
                                    </div>
                                </div>
                            </div>
                         </div>
                     </div>
                     <BottomNav />
                 </div>
             )
        }


        // --- App Component with Router ---

        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={<WelcomeScreen />} />
                        <Route path="/login" element={<LoginScreen />} />
                        <Route path="/dashboard" element={<DashboardScreen />} />
                        <Route path="/profile" element={<ProfileScreen />} />
                        <Route path="/premium" element={<PremiumScreen />} />
                        <Route path="/kanji" element={<KanjiScreen />} />
                        <Route path="/vocab" element={<VocabScreen />} />
                        <Route path="/grammar" element={<GrammarScreen />} />
                        <Route path="/review" element={<ReviewScreen />} />
                        <Route path="/leaderboard" element={<LeaderboardScreen />} />
                        <Route path="/rewards" element={<RewardsScreen />} />
                        <Route path="/missions" element={<MissionsScreen />} />
                        <Route path="/map" element={<MapScreen />} />
                    </Routes>
                </MemoryRouter>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>